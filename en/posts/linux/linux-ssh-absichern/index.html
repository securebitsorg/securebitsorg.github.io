<!doctype html><html lang=en><head><title>Secure Linux SSH</title><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.81c7bf565a586503a8a847c720b10631b6efb822b06b876a0c6ded91649fe346.css integrity="sha256-gce/VlpYZQOoqEfHILEGMbbvuCKwa4dqDG3tkWSf40Y="><link rel=icon type=image/png href=/images/favicon_hu_66814ce56ef195be.png><meta property="og:title" content="SecureBits Blog by Marcel Dellmann"><meta property="og:type" content="website"><meta property="og:description" content="Portfolio and personal blog of Marcel Dellmann."><meta property="og:image" content="/images/author.jpg"><meta property="og:url" content="https://securebitsorg.github.io/"><meta name=description content="Secure Linux SSH"><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/en>SecureBits Blog by Marcel Dellmann</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/en#home>Home</a></li><li class=nav-item><a class=nav-link href=/en#about>About</a></li><li class=nav-item><a class=nav-link href=/en#projects>Projekte</a></li><li class=nav-item><a class=nav-link href=/en#recent-posts>Recent Posts</a></li><li class=nav-item><a class=nav-link href=/en#accomplishments>Certifications</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/en/posts>Posts</a></li><li class=nav-item><a class=nav-link href=/pages/kontakt/>Contact</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=languageSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><span class="fi fi-gb"></span>
English</a><div class=dropdown-menu aria-labelledby=languageSelector><a class="dropdown-item nav-link languages-item" href=/posts/linux/linux-ssh-absichern><span class="fi fi-de"></span>
Deutsch
</a><a class="dropdown-item nav-link languages-item" href=/en/posts/linux/linux-ssh-absichern><span class="fi fi-gb"></span>
English</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/en/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/en/posts/ data-filter=all>Posts</a></li><div class=subtree><li><a class=list-link href=/en/posts/info/ title=Info>Info</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/en/posts/security/> IT-Security</a><ul><li><a class=list-link href=/en/posts/security/linux-ssh-absichern/ title=Post1>Post1</a></li><li><a class=list-link href=/en/posts/security/proxmox-fail2ban/ title="Post 2">Post 2</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/en/posts/linux/> Linux</a><ul class=active><li><a class=list-link href=/en/posts/linux/proxmox-fail2ban/ title="Proxmox with fail2ban">Proxmox with fail2ban</a></li><li><a class="active list-link" href=/en/posts/linux/linux-ssh-absichern/ title="Secure Linux SSH">Secure Linux SSH</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/posts/linux-ssh/SSH-absichern.png)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author_hu_e65e163c584e3543.jpg alt="Author Image"><h5 class=author-name>Marcel Dellmann</h5><p class=text-muted>Tuesday, February 18, 2025 | 13 minutes</p></div><div class=title><h1>Secure Linux SSH</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/en/tags/linux/ class="btn btn-sm btn-info">Linux</a></li><li class=rounded><a href=/en/tags/security/ class="btn btn-sm btn-info">Security</a></li></ul></div><div class=post-content id=post-content><h1 id=securing-linux-ssh-access-correctly>Securing Linux SSH access correctly</h1><p>When operating a Linux server, it is usually necessary for administration purposes to establish secure access via SSH.</p><p>This tutorial is designed to help you successfully protect Linux SSH access against attacks.</p><p>Of course, securing SSH access is only one way of protecting your server against attacks. You can find more options in the tutorial “Securing Raspberry Pi from A to Z” that I published here in the blog.</p><h2 id=video-tutorial-on-the-topic-of-securing-linux-ssh>Video tutorial on the topic of “Securing Linux SSH”</h2><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube-nocookie.com/embed/iCPRIR6FDW0?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><h3 id=more-videos-on-the-topic-of-securing-linux-servers>More videos on the topic of securing Linux servers</h3><p>This tutorial is part of a video series on the topic of “Securing Linux servers.”</p><p>You are also welcome to watch the complete playlist on the topic on YouTube. New videos on the topic are added here regularly.</p><p><strong>To the playlist</strong> <a href="https://www.youtube.com/playlist?list=PLknVEQKqt1ln-5HL8aG_Xk0bDeitgt0j" target=_blank rel=noopener>https://www.youtube.com/playlist?list=PLknVEQKqt1ln-5HL8aG_Xk0bDeitgt0j</a>_</p><h2 id=howto--securing-linux-ssh-access-correctly>HowTo – Securing Linux SSH access correctly</h2><p>SSH is a popular protocol for logging into remote servers and executing commands. But how can you ensure that only authorized persons have access to the SSH service? In this tutorial, I would like to share some tips and tricks on how to properly secure your SSH access.</p><h3 id=step-1-secure-linux-ssh--change-the-default-port-of-the-ssh-service>Step 1 Secure Linux SSH – Change the default port of the SSH service</h3><p>Most attacks on the SSH port (port 22) are automated. Therefore, changing the SSH port can make this method of attack a little more difficult. I will show you how to change the default SSH port.</p><p>To change the default SSH port, you need to modify it in the SSH service&rsquo;s configuration file.</p><p>To do this, open the configuration file located at ‘/etc/ssh/sshd_config’ with the ‘Nano’ editor, as shown in this example.</p><hr><blockquote><p>&#9888;&#xfe0f;
<strong>IMPORTANT! Adjust firewall rules!</strong>
If you have already activated firewall rules on your server, you must add this rule to your selected port! Otherwise, you will lock yourself out and <strong>no longer have access</strong> via SSH!</p></blockquote><hr><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Open the SSH config file</span>
</span></span><span style=display:flex><span>sudo nano /etc/ssh/sshd_config
</span></span></code></pre></div><p>After calling up the above command, an editor window should open with the following content:</p><figure><img src=/images/posts/linux-ssh/sshd_config.png alt="Linux file sshd_config"><figcaption><p>Linux file sshd_config</p></figcaption></figure><p>In the line <strong>‘#Port 22’</strong>, remove the # sign (this activates the function/destinations) and replace the default port number with your chosen port number. In this case, it is <strong>Port 2223</strong>. Now save the change with the key combination <strong>‘CTRL+O’</strong> and exit the editor with <strong>‘CTRL+X’</strong>.</p><p>The <strong>SSH service must be restarted</strong> for the changes to take effect.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Restart SSH service</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo systemctl restart ssh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check status and port of SSH service</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo systemctl status ssh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># It should now show that the service is ‘enabled’ and the listening port is specified further down in the output.</span>
</span></span></code></pre></div><h3 id=checking-the-possibility-of-an-ssh-login-on-the-new-port>Checking the possibility of an SSH login on the new port</h3><p>To do this, open a new terminal window and log in to the server via SSH, specifying the new port.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Login SSH with port specification</span>
</span></span><span style=display:flex><span>ssh root@IP address -p <span style=color:#ae81ff>2223</span> 
</span></span><span style=display:flex><span><span style=color:#75715e># The port and IP address must be supplemented with your corresponding and selected information.</span>
</span></span></code></pre></div><hr><blockquote><p><strong>Changed SSH port not accessible</strong></p><p>If the SSH port change does not work, i.e., SSH access is not accessible via the new port, please enter the following commands.
This error can occur, for example, with a Debian Proxmox container. Here, the port change in sshd_config is not automatically applied and access via the standard port 22 is still possible.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl  disable  ssh.socket
</span></span><span style=display:flex><span>systemctl  stop  ssh.socket
</span></span><span style=display:flex><span>reboot
</span></span></code></pre></div></blockquote><hr><p><strong>A list of standardized and dynamic ports can be found, for example, here in the corresponding Wikipedia post:</strong></p><p><a href=https://de.wikipedia.org/wiki/Liste_der_standardisierten_Ports target=_blank rel=noopener>https://de.wikipedia.org/wiki/Liste_der_standardisierten_Ports</a></p><h3 id=step-2-secure-linux-ssh--generate-ssh-key-pair>Step 2 Secure Linux SSH – Generate SSH key pair</h3><hr><blockquote><p>&#9888;&#xfe0f;
<strong>IMPORTANT NOTE!</strong></p><p>First of all, please note that you should only use the two methods RSA 4096 bit (3072 bit or higher) and Ed25519 for key generation. I personally always use Ed25519 (based on an elliptic curve) together with an extra passphrase (additional password) as a second factor and would recommend doing the same.</p></blockquote><hr><h4 id=generate-ssh-key-pair-on-linux-and-macos>Generate SSH key pair on Linux and macOS</h4><p>Open a terminal window and enter the following command to create and protect a key file using Ed25519 with an additional password and additional protection against brute force attacks.</p><hr><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create a key pair based on Ed25519 + password and brute force protection</span>
</span></span><span style=display:flex><span>ssh-keygen -o -a <span style=color:#ae81ff>100</span> -t ed25519
</span></span><span style=display:flex><span><span style=color:#75715e># Output:</span>
</span></span><span style=display:flex><span>Generating public/private ed25519 key pair.
</span></span><span style=display:flex><span>Enter file in which to save the key <span style=color:#f92672>(</span>/root/.ssh/id_ed25519<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>Enter passphrase <span style=color:#f92672>(</span>empty <span style=color:#66d9ef>for</span> no passphrase<span style=color:#f92672>)</span>: <span style=color:#f92672>(</span>enter your desired password here<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Enter same passphrase again: <span style=color:#f92672>(</span>repeat the password here<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># The key pair is then generated and can be found via the path ‘/root/.ssh/id_ed25519’ for the private key and ‘/root/.ssh/id_ed25519.pub’ for the public key. </span>
</span></span></code></pre></div><hr><blockquote><p>&#9888;&#xfe0f; <strong>IMPORTANT NOTE!</strong></p><p>The key with the extension id_ed25519 is the private key and must never be disclosed!</p><p>Please keep the private key safe and store it in the password manager ‘Bitwarden’, for example, or save it to an encrypted USB stick and keep it safe. Without this private key, you will no longer have access to your server if it is lost!</p><p>Only the key file with the <strong>extension .pub</strong> should be used for exporting!!!</p></blockquote><hr><h4 id=generating-an-ssh-key-pair-in-windows>Generating an SSH key pair in Windows</h4><p>Starting with Windows 10 version 1809, an SSH client is installed by default, so you can start generating keys right away.</p><p>To do this, enter the following command in the command line in <strong>PowerShell</strong> or <strong>Microsoft Terminal</strong> (which I always use in the videos) with administrator rights:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create a key pair based on Ed25519 + password and brute force protection on Windows</span>
</span></span><span style=display:flex><span>ssh-keygen -o -a <span style=color:#ae81ff>100</span> -t ed25519
</span></span><span style=display:flex><span><span style=color:#75715e># Output:</span>
</span></span><span style=display:flex><span>Enter passphrase <span style=color:#f92672>(</span>empty <span style=color:#66d9ef>for</span> no passphrase<span style=color:#f92672>)</span>: &lt;enter your secure password here&gt;
</span></span><span style=display:flex><span>Enter same passphrase again: &lt;confirm password&gt;
</span></span><span style=display:flex><span>Your identification has been saved in C:Usersusername/.ssh/id_ed25519. &lt;username <span style=color:#f92672>=</span> replace with your username&gt;
</span></span><span style=display:flex><span>Your public key has been saved in C:Usersusername/.ssh/id_ed25519.pub. &lt;username <span style=color:#f92672>=</span> replace with your username&gt;
</span></span><span style=display:flex><span>The key fingerprint is:
</span></span><span style=display:flex><span>Example: SHA256:OIzc1yE7joL2Bzy8!gS0j8eGK7bYaH1FmF3sDuMeSj8 username@LOCAL-HOSTNAME
</span></span></code></pre></div><h3 id=step-3-secure-linux-ssh--copy-ssh-public-key-to-remote-server>Step 3 Secure Linux SSH – Copy SSH public key to remote server</h3><p>In order to be able to log in to the Linux server with a key pair in the future, the public key must first be copied/communicated to the remote server.</p><p>This public key is stored for the user logging in in the file ‘.ssh/authorized_keys’. You can find this in the root directory ‘cd .ssh’.</p><blockquote><p>If the directory ‘.ssh/’ does not exist, please create it on the remote server with the following command:</p></blockquote><p><code>mkdir .ssh/</code></p><blockquote><p>To install the public key on the remote server, you must be authorized to log in to the remote server with your username and password!
Copy the public key to the file ‘.ssh/authorized_keys’ in Windows PowerShell / Microsoft Terminal</p></blockquote><p>To start copying the public key to the remote server, please enter the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Copy key to a remote server via Powershell</span>
</span></span><span style=display:flex><span>type $env:USERPROFILE.sshid_ed25519.pub | ssh remoteuser@IP-addressRemote-Server “cat &gt;&gt; .ssh/authorized_keys”
</span></span><span style=display:flex><span><span style=color:#75715e># Replace &lt;remoteuser&gt; with the user on the remote server you want to log in to.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Replace &lt;IP address of remote server&gt; with the IP address of your remote server.</span>
</span></span></code></pre></div><p><strong>Copy the public_key to the file ‘.ssh/authorized_keys’ on Linux / macOS</strong></p><blockquote><p><strong>TIP!</strong></p><p>In order to install the public_key on the remote server, you must be authorized to log in to the remote server with your username and password!</p></blockquote><p>To copy the public_key to the remote server under Linux and macOS (which is also based on a Unix system), open a terminal window and enter the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># The attribute -p specifies the SSH port of the remote server.</span>
</span></span><span style=display:flex><span>ssh-copy-id -i .ssh/id_ed25519.pub -p <span style=color:#ae81ff>2223</span> remoteuser@IP-addressRemote-server
</span></span></code></pre></div><h4 id=checking-the-authorized_keys-on-the-remote-server>Checking the authorized_keys on the remote server</h4><p>Last but not least, we must check the ‘authorized_keys’ file on the remote server to make sure that the public key has actually been added as an entry!</p><p>To do this, log in to the remote server with your username and password and call up the contents of the ‘authorized_keys’ file with the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Display the contents of the ‘authorized_keys’ file</span>
</span></span><span style=display:flex><span>nano .ssh/authorized_keys
</span></span><span style=display:flex><span><span style=color:#75715e># Output:</span>
</span></span><span style=display:flex><span>The output of the editor window should look like this or start like this:
</span></span><span style=display:flex><span>ssh-ed25519 AAAAC3N........
</span></span></code></pre></div><h3 id=step-4-secure-linux-ssh--enable-ssh-login-via-ssh-key>Step 4 Secure Linux SSH – Enable SSH login via SSH key</h3><p>Once the public key has been successfully copied to the remote server and verified, we can now enable the login method via key pair on this server.</p><p>To do this, we will modify the config file ‘sshd_config’ accordingly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Adjust the SSH configuration file on the remote server</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Open sshd-config</span>
</span></span><span style=display:flex><span>sudo nano /etc/ssh/sshd_config
</span></span><span style=display:flex><span><span style=color:#75715e># Now set the following line to ‘Yes’ in the editor window and remove the # sign</span>
</span></span><span style=display:flex><span>PubkeyAuthentication yes
</span></span><span style=display:flex><span><span style=color:#75715e># Furthermore, you must check whether the correct path to the file ‘authorized_keys’ is specified and also activated.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># To do this, the line for this file must look as follows and the ‘#’ character must be removed:</span>
</span></span><span style=display:flex><span>AuthorizedKeysFile      .ssh/authorized_keys
</span></span><span style=display:flex><span><span style=color:#75715e># Then save the file with ‘CTRL+O’ and exit the editor window with ‘CTRL+X’.</span>
</span></span></code></pre></div><p>After making these changes to ‘sshd_config’, the SSH service must be restarted:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Restart the SSH service to apply the changes</span>
</span></span><span style=display:flex><span>sudo systemctl restart ssh
</span></span><span style=display:flex><span><span style=color:#75715e># For Red Hat-based distributions such as CentOS, Fedora, Rocky Linux, etc., restart the ‘sshd’ service.</span>
</span></span><span style=display:flex><span>sudo service sshd restart
</span></span></code></pre></div><h3 id=step-5-secure-linux-ssh--verify-ssh-login-with-key-pair>Step 5 Secure Linux SSH – Verify SSH login with key pair</h3><p>To verify SSH access via SSH key, log in to the remote server as usual:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Log in to the ### Schritt 7 Linux SSH absichern – Anmeldung als Root-User via SSH deaktivieren</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Ein wirklich wichtiger Sicherheitsaspekt bei der Absicherung des SSH-Zugangs ist es, dass der volle root-Zugang via SSH-Zugang deaktiviert wird! Dieses gilt nicht nur für die Anmeldung via SSH-Schlüssel auf dem Remote-Server wie wir es in diesem Tutorial gelernt haben, sondern sollte immer in der ’sshd_config-Datei‘ deaktiviert werden.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Ein fremder Nutzer der sich mit zum Beispiel gestohlenen Anmeldedaten auf eurem Server via SSH anmelden kann und dann gleich alles Privilegien für Änderungen hat, ist der absolute Alptraum!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Um diesen Alptraum zu vermeiden, öffnen wir wieder die Konfigurationsdatei für den SSH-Dienst und passen diese wie folgt an:
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>bash
</span></span><span style=display:flex><span><span style=color:#75715e># Anmeldung als Root-User via SSH-Verbindung deaktivieren</span>
</span></span><span style=display:flex><span>sudo nano /etc/ssh/sshd_config
</span></span><span style=display:flex><span><span style=color:#75715e># Im Editor-Fenster nun die Zeile &#39;#PermitRootLogin&#39; in &#39;PermitRootLogin no&#39; ändern</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Dann wieder die Änderungen speichern und den SSH-Dienst neustarten</span>
</span></span><span style=display:flex><span>sudo systemctl restart ssh
</span></span></code></pre></div><h3 id=schritt-8-linux-ssh-absichern--neueste-protokolle-zur-authentifizierung-erzwingen>Schritt 8 Linux SSH absichern – Neueste Protokolle zur Authentifizierung erzwingen</h3><p>Ein weiterer Schritt um die Sicherheit der SSH-Anmeldung zu erhöhen ist es, die Erzwingung der Nutzung der neuesten Protokolle (SSH-Protocol-Version 2) zur Anmeldung zu nutzen.</p><p>Hierfür muss natürlich wieder die SSH-Config-Datei angepasst werden und der SSH-Dienst neu gestartet werden.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Folgende Einträge sollten in der SSH-Config-Datei noch hinzugefügt bzw. angepasst werden.</span>
</span></span><span style=display:flex><span>ChallengeResponseAuthentication no
</span></span><span style=display:flex><span><span style=color:#75715e># und</span>
</span></span><span style=display:flex><span>UsePAM no
</span></span><span style=display:flex><span><span style=color:#75715e># Dann wieder den SSH-Dienst neu starten</span>
</span></span><span style=display:flex><span>sudo systemctl restart ssh
</span></span></code></pre></div><hr><h2 id=fazit--linux-ssh-absichern>Fazit – Linux SSH absichern</h2><p>Wir haben in diesem Tutorial gelernt, wie wir den SSH-Zugang zu einem Linux-Server effektiv und nach neustem Stand der Technik vor Angriffe schützen können.</p><p>Ich kann nur jedem ans Herz legen, alle SSH-Zugänge (auch im internen Netzwerk) so abzusichern! Weiterhin habt ihr noch die Möglichkeit Brute Force-Attacken auf den SSH-Service mit zum Beispiel ‚Fail2ban‘ zu schützen. Wie das funktioniert, habe ich euch ja schon in dem Tutorial ‚Raspberry Pi absichern von A-Z | 2023‚ (funktioniert bei allen debian-basierten Systemen) gezeigt und habe auf eine Wiederholung in diesem Tutorial darauf verzichtet.</p><p>Wichtig ist noch zu erwähnen, dass diese in diesem Tutorial behandelte Methode nur eine Möglichkeit widerspiegelt, einen Linux-Server richtig abzusichern. Also nur ein Baustein in der IT-Sicherheit ist!</p><p>Sollte euch dieses Tutorial ein wenig gefallen haben, so würde ich mich über ein Abo von meinem YouTube-Kanal sehr freuen!
remote server via SSH key
ssh user@IP addressRemoteServer</p><h1 id=if-you-are-logging-in-to-the-remote-server-with-this-user-for-the-first-time-you-will-receive-the-following-query>If you are logging in to the remote server with this user for the first time, you will receive the following query:</h1><p>The authenticity of host ‘IP address of remote server’ can&rsquo;t be established.
ED25519 key fingerprint is SHA256:ElsjpajVayeK.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])?</p><h1 id=here-you-must-confirm-with-yes-and-then-enter-the-passphrase-your-password-for-the-ssh-key-created-above>Here you must confirm with ‘yes’ and then enter the passphrase (your password for the SSH key created above)</h1><p>Enter passphrase for key ‘C:Usersmarcel/.ssh/id_ed25519’:</p><h1 id=you-should-now-be-connected-to-the-remote-server>You should now be connected to the remote server</h1><pre tabindex=0><code>---
### Step 6 Secure Linux SSH – Secure Linux SSH by disabling password login
&gt; **ATTENTION!**
&gt;
&gt;Only perform this step if the login via SSH key worked and you have created another user with elevated privileges as described in the article ‘Securing Raspberry Pi from A to Z’!
&gt;
&gt; **Otherwise, you will lock yourself out of the server!**
---

After successfully logging in with the SSH key, we can now finally disable the insecure password login to the remote server.

To do this, we need to make another adjustment to the ‘sshd_config’ file and, at the same time, disable the ‘root user’ login as described in the next section.
```bash
# Disable SSH login using passwords on the remote server
sudo nano /etc/ssh/sshd_config # Open the sshd_config file for editing
# Change the following line ‘#PasswordAuthentication yes’ to ‘PasswordAuthentication no’
# Save with ‘CTRL+O’ and exit the editor with &#39;CTRL+X&#39;
# Restart the SSH service
sudo systemctl restart ssh
</code></pre><p><strong>Of course, you can make the changes from the next paragraph in this tutorial at the same time, but for clarity, I will perform all steps individually!</strong></p><h3 id=step-7-secure-linux-ssh--disable-root-user-login-via-ssh>Step 7 Secure Linux SSH – Disable root user login via SSH</h3><p>A really important security aspect when securing SSH access is to disable full root access via SSH! This applies not only to logging in via SSH key on the remote server, as we learned in this tutorial, but should always be disabled in the ‘sshd_config file’.</p><p>An unknown user who can log in to your server via SSH with stolen login credentials, for example, and then immediately has full privileges to make changes is an absolute nightmare!</p><p>To avoid this nightmare, we open the configuration file for the SSH service again and adjust it as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Disable login as root user via SSH connection</span>
</span></span><span style=display:flex><span>sudo nano /etc/ssh/sshd_config
</span></span><span style=display:flex><span><span style=color:#75715e># In the editor window, change the line ‘#PermitRootLogin’ to &#39;PermitRootLogin no&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Then save the changes again and restart the SSH service</span>
</span></span><span style=display:flex><span>sudo systemctl restart ssh
</span></span></code></pre></div><h3 id=step-8-secure-linux-ssh--enforce-the-latest-authentication-protocols>Step 8 Secure Linux SSH – Enforce the latest authentication protocols</h3><p>Another step to increase the security of SSH login is to enforce the use of the latest protocols (SSH Protocol Version 2) for login.</p><p>To do this, you must again modify the SSH config file and restart the SSH service.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># The following entries should be added or modified in the SSH config file.</span>
</span></span><span style=display:flex><span>ChallengeResponseAuthentication no
</span></span><span style=display:flex><span><span style=color:#75715e># and</span>
</span></span><span style=display:flex><span>UsePAM no
</span></span><span style=display:flex><span><span style=color:#75715e># Then restart the SSH service again.</span>
</span></span><span style=display:flex><span>sudo systemctl restart ssh
</span></span></code></pre></div><hr><h2 id=conclusion--securing-linux-ssh>Conclusion – Securing Linux SSH</h2><p>In this tutorial, we learned how to effectively protect SSH access to a Linux server from attacks using the latest technology.</p><p>I highly recommend securing all SSH access (including on the internal network) in this way! You also have the option of protecting the SSH service against brute force attacks with, for example, ‘Fail2ban’. I have already shown you how this works in the tutorial ‘Securing Raspberry Pi from A to Z | 2023’ (works on all Debian-based systems) and have refrained from repeating it in this tutorial.</p><p>It is important to mention that the method covered in this tutorial is only one way to properly secure a Linux server. It is only one component of IT security!</p><p>If you enjoyed this tutorial, I would be very happy if you subscribed to my YouTube channel!</p></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fsecurebitsorg.github.io%2fen%2fposts%2flinux%2flinux-ssh-absichern%2f&title=Secure%20Linux%20SSH" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button" href="mailto:?subject=Secure%20Linux%20SSH&body=https%3a%2f%2fsecurebitsorg.github.io%2fen%2fposts%2flinux%2flinux-ssh-absichern%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/securebitsorg/securebits.github.io/edit/main/content/posts/linux/linux-ssh-absichern.en.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/en/posts/linux/proxmox-fail2ban/ title="Secure Proxmox VE with fail2ban" class="btn filled-button"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Secure Proxmox VE with fail2ban</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#video-tutorial-on-the-topic-of-securing-linux-ssh>Video tutorial on the topic of “Securing Linux SSH”</a><ul><li><a href=#more-videos-on-the-topic-of-securing-linux-servers>More videos on the topic of securing Linux servers</a></li></ul></li><li><a href=#howto--securing-linux-ssh-access-correctly>HowTo – Securing Linux SSH access correctly</a><ul><li><a href=#step-1-secure-linux-ssh--change-the-default-port-of-the-ssh-service>Step 1 Secure Linux SSH – Change the default port of the SSH service</a></li><li><a href=#checking-the-possibility-of-an-ssh-login-on-the-new-port>Checking the possibility of an SSH login on the new port</a></li><li><a href=#step-2-secure-linux-ssh--generate-ssh-key-pair>Step 2 Secure Linux SSH – Generate SSH key pair</a></li><li><a href=#step-3-secure-linux-ssh--copy-ssh-public-key-to-remote-server>Step 3 Secure Linux SSH – Copy SSH public key to remote server</a></li><li><a href=#step-4-secure-linux-ssh--enable-ssh-login-via-ssh-key>Step 4 Secure Linux SSH – Enable SSH login via SSH key</a></li><li><a href=#step-5-secure-linux-ssh--verify-ssh-login-with-key-pair>Step 5 Secure Linux SSH – Verify SSH login with key pair</a></li><li><a href=#schritt-8-linux-ssh-absichern--neueste-protokolle-zur-authentifizierung-erzwingen>Schritt 8 Linux SSH absichern – Neueste Protokolle zur Authentifizierung erzwingen</a></li></ul></li><li><a href=#fazit--linux-ssh-absichern>Fazit – Linux SSH absichern</a></li></ul><ul><li><ul><li><a href=#step-7-secure-linux-ssh--disable-root-user-login-via-ssh>Step 7 Secure Linux SSH – Disable root user login via SSH</a></li><li><a href=#step-8-secure-linux-ssh--enforce-the-latest-authentication-protocols>Step 8 Secure Linux SSH – Enforce the latest authentication protocols</a></li></ul></li><li><a href=#conclusion--securing-linux-ssh>Conclusion – Securing Linux SSH</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://securebitsorg.github.io/en/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://securebitsorg.github.io/en/#projects>Projekte</a></li><li class=nav-item><a class=smooth-scroll href=https://securebitsorg.github.io/en/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=https://securebitsorg.github.io/en/#accomplishments>Certifications</a></li><li class=nav-item><a class=smooth-scroll href>Privacy</a></li><li class=nav-item><a class=smooth-scroll href=/pages/kontakt/>Contact</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:service@secure-bits.org target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>service@secure-bits.org</span></a></li><li><a href=https://github.com/securebitsorg target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>securebitsorg</span></a></li><li><a href=https://www.linkedin.com/in/securebits target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Marcel Dellmann</span></a></li><li><a href=tel:+49152%2059422774 target=_blank rel=noopener><span><i class="fas fa-phone-alt"></i></span> <span>+49152 59422774</span></a></li></ul></div></div></div></footer><script src=/application.99db8d9c965b46a0e74865cc3bec9ab43bca11ed1f355fa578f5b3663c36a194.js integrity="sha256-mduNnJZbRqDnSGXMO+yatDvKEe0fNV+lePWzZjw2oZQ=" defer></script></body></html>