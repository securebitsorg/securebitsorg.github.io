<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>UFW Firewall Raspberry Pi Installation</title>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />

<link rel="stylesheet" href="/application.c7def075cdfcdceee4102d40e4b28906db4e9ecd2b16eb0ac0b842be0b2aa140.css" integrity="sha256-x97wdc383O7kEC1A5LKJBttOns0rFusKwLhCvgsqoUA=" />





  

  
  
  
    
  
  

  <link rel="icon" type="image/png" href="/images/favicon_hu_66814ce56ef195be.png" />










<meta property="og:title" content="SecureBits Blog by Marcel Dellmann"/>
<meta property="og:type" content="website"/>
<meta property="og:description" content="Portfolio and blog of Marcel Dellmann."/>
<meta property="og:image" content="/images/author.jpg">
<meta property="og:url" content="http://localhost:1313/">

    
<meta name="description" content="UFW Firewall Raspberry Pi Installation" />



    





    <script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">
     let theme = localStorage.getItem('theme-scheme') || localStorage.getItem('darkmode:color-scheme') || 'light'
if (theme === 'system') {
  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    theme = 'dark'
  } else {
    theme = 'light'
  }
}
document.documentElement.setAttribute('data-theme', theme)

    </script>
    
  </head>

  <body class="type-posts kind-page" data-bs-spy="scroll" data-bs-target="#TableOfContents" data-bs-offset="80">
    <div class="container-fluid bg-secondary wrapper">
      
      
    
















  


  





  
  
    
  
  



  
  
    
  
  









  




  




  


<nav class="navbar navbar-expand-xl top-navbar shadow " id="top-navbar">
  <div class="container">
    
    <button class="navbar-toggler navbar-light" id="sidebar-toggler" type="button">
      <i data-feather="sidebar"></i>
    </button>
    
    <a class="navbar-brand" href="/en">
      
        <img src="/images/logo_header_hu_55859a06528af13.png" id="logo" alt="Logo">
      SecureBits Blog by Marcel Dellmann</a>
    <button
      class="navbar-toggler navbar-light"
      id="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#top-nav-items"
      aria-label="menu"
    >
      <i data-feather="menu"></i>
    </button>

    <div class="collapse navbar-collapse dynamic-navbar" id="top-nav-items">
      <ul class="nav navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/en#home">Home</a>
        </li>
        
          
          
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/en#about">About</a>
                </li>
              
            
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/en#accomplishments">Certifications</a>
                </li>
              
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/en#projects">Projekte</a>
                </li>
              
            
            
            
              
              
                <li class="nav-item">
                  <a class="nav-link" href="/en#recent-posts">Recent Posts</a>
                </li>
              
            
          
        
        
          <div id="top-navbar-divider"></div>
        
        
          <li class="nav-item">
            <a class="nav-link" id="blog-link" href="/en/posts">Posts</a>
          </li>
        
        
        
            
        
            
              <li class="nav-item">
                <a class="nav-link" href="mailto:ticket@secure-bits.org">Contact</a>
              </li>
            
        
        
        
          



  
  


<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle"  href="#" id="themeSelector" role="button"
  data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  <img id="navbar-theme-icon-svg" class="theme-icon" src="/icons/moon-svgrepo-com.svg" width=20 alt="Dark Theme">
</a>
<div id="themeMenu" class="dropdown-menu dropdown-menu-icons-only" aria-labelledby="themeSelector">
  
  <a class="dropdown-item nav-link" href="#" data-scheme="light">
    <img class="theme-icon" src="/icons/sun-svgrepo-com.svg" width=20 alt="Light Theme">
  </a>
  
  
  <a class="dropdown-item nav-link" href="#" data-scheme="dark">
    <img class="theme-icon" src="/icons/moon-svgrepo-com.svg" width=20 alt="Dark Theme">
  </a>
  
  
  <a class="dropdown-item nav-link" href="#" data-scheme="system">
    <img class="theme-icon" src="/icons/computer-svgrepo-com.svg" width=20 alt="System Theme">
  </a>
  
</div>
</li>

        
      </ul>
    </div>
  </div>
  
  
    <img src="/images/logo_header_hu_55859a06528af13.png" class="d-none" id="main-logo" alt="Logo">
  
  
    <img src="/images/logo_header_hu_55859a06528af13.png" class="d-none" id="inverted-logo" alt="Inverted Logo">
  
  
</nav>



      
      
  <section class="sidebar-section" id="sidebar-section">
    <div class="sidebar-holder">
      <div class="sidebar" id="sidebar">
        <form class="mx-auto" method="get" action="/en/search">
          <input type="text" name="keyword" value="" placeholder="Search" data-search="" id="search-box" />
        </form>
        <div class="sidebar-tree">
          <ul class="tree" id="tree">
            <li id="list-heading"><a href="/en/posts/" data-filter="all">Posts</a></li>
            <div class="subtree">
                
  
  
  
  
  
    
    <li>
      <i data-feather="plus-circle"></i><a class=" list-link" href="/en/posts/info/"> Information</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/info/information/" title="Information about this blog and YouTube channel">Information about this blog and YouTube channel</a></li>
  


      </ul>
    </li>
  

  
  
  
  
  
    
    <li>
      <i data-feather="plus-circle"></i><a class=" list-link" href="/en/posts/linux/"> Linux</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/linux/proxmox-fail2ban/" title="Proxmox and fail2ban">Proxmox and fail2ban</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/linux/linux-ssh-absichern/" title="Secure Linux SSH">Secure Linux SSH</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/linux/der-linux-ip-befehl_-umfassende-anleitung-/" title="The Linux IP configuration command &#39;ip&#39;">The Linux IP configuration command &#39;ip&#39;</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/linux/der-traceroute-befehl-unter-linux/" title="The traceroute command in Linux with omprehensive instructions and examples">The traceroute command in Linux with omprehensive instructions and examples</a></li>
  


      </ul>
    </li>
  

  
  
  
  
    
    
  
  
    
    <li>
      <i data-feather="minus-circle"></i><a class="active list-link" href="/en/posts/security/"> IT-Security</a>
      
      <ul class="active">
        
  
  
  
  
    
    
  
  
    
    <li><a class="active list-link" href="/en/posts/security/ufw-firewall-debian-based/" title="Configuring the UFW Firewall using a Raspberry Pi as an example">Configuring the UFW Firewall using a Raspberry Pi as an example</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/wie-funktioniert-eine-firewall/" title="How do firewalls work and what different types are there?">How do firewalls work and what different types are there?</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/nmap-network-mapper-umfassender-leitfaden/" title="Nmap (Network Mapper) - Comprehensive guide for IT security managers">Nmap (Network Mapper) - Comprehensive guide for IT security managers</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/man-in-the-middle-secure/" title="Protection against man-in-the-middle attacks">Protection against man-in-the-middle attacks</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/ufw-firewall-mehrere-ports/" title="UFW Firewall Application Profiles">UFW Firewall Application Profiles</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/ufw-firewall-application-profiles/" title="UFW Firewall Application Profiles">UFW Firewall Application Profiles</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/ufw-firewall-basics/" title="UFW Firewall Basics">UFW Firewall Basics</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/man-in-the-middle/" title="Understanding Man-in-the-Middle Attacks">Understanding Man-in-the-Middle Attacks</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/mac-adresse/" title="What is a MAC address and what is it used for?">What is a MAC address and what is it used for?</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/was-ist-ein-proxy-server/" title="What is a proxy server and what is it used for?">What is a proxy server and what is it used for?</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/what-is-a-unified-threat-management-firewall/" title="What is a UTM firewall?">What is a UTM firewall?</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/security/was-ist-sniffing/" title="What is network sniffing?">What is network sniffing?</a></li>
  


      </ul>
    </li>
  

  
  
  
  
  
    
    <li>
      <i data-feather="plus-circle"></i><a class=" list-link" href="/en/posts/privacy/"> Privacy</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li>
      <i data-feather="plus-circle"></i><a class=" list-link" href="/en/posts/privacy/adguard/"> AdGuard</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/adguard/adguard-home-dns-over-quic/" title="AdGuard DNS encryption with DNS over QUIC">AdGuard DNS encryption with DNS over QUIC</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/adguard/adguard-home-konfigurieren/" title="AdGuardHome Setup – Basic Configuration">AdGuardHome Setup – Basic Configuration</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/adguard/fritzbox-und-adguard-dns-setup/" title="Configure Fritzbox with AdGuard Home">Configure Fritzbox with AdGuard Home</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/adguard/adguard-home-auf-raspberry-pi-installieren/" title="Install AdGuardHome on a Raspberry Pi">Install AdGuardHome on a Raspberry Pi</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/adguard/adguard-home-manuell-aktualisieren/" title="Manually update AdGuard Home">Manually update AdGuard Home</a></li>
  


      </ul>
    </li>
  

  
  
  
  
  
    
    <li>
      <i data-feather="plus-circle"></i><a class=" list-link" href="/en/posts/privacy/pihole/"> Pi-hole</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/pihole/pihole-unbound/" title="Install Pi-hole and Unbound">Install Pi-hole and Unbound</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/pihole/pihole-auf-einen-raspberry-pi-installieren/" title="Install Pihole on a Raspberry Pi">Install Pihole on a Raspberry Pi</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/pihole/pihole-basic-setup/" title="Pi-hole setup">Pi-hole setup</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/pihole/pihole-vpn/" title="Pi-hole with WireGuard and piVPN">Pi-hole with WireGuard and piVPN</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/pihole/pihole-fritzbox-setup/" title="Pi-hole-/-Fritzbox-configure">Pi-hole-/-Fritzbox-configure</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/pihole/pi-hole-backup-mit-teleporter/" title="Pi-hole-Backup with teleporter">Pi-hole-Backup with teleporter</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/pihole/pihole-with-the-latest-php-version/" title="Pihole always with the latest PHP version">Pihole always with the latest PHP version</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/privacy/pihole/pihole-installation-debian/" title="Pihole Installation on Debian-based operating systems">Pihole Installation on Debian-based operating systems</a></li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  

  
  
  
  
  
    
    <li>
      <i data-feather="plus-circle"></i><a class=" list-link" href="/en/posts/windows/"> Windows</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/windows/windows-product-key-activate/" title="Activate Windows Product Key">Activate Windows Product Key</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/windows/change-windows-password/" title="Change your Windows password easily via the terminal">Change your Windows password easily via the terminal</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/windows/cmd-befehle-im-ueberblick/" title="CMD commands overview for Windows">CMD commands overview for Windows</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/windows/netstat/" title="Netstat on Windows at a glance">Netstat on Windows at a glance</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/windows/ipconfig-command/" title="The ipconfig command overview">The ipconfig command overview</a></li>
  


      </ul>
    </li>
  

  
  
  
  
  
    
    <li>
      <i data-feather="plus-circle"></i><a class=" list-link" href="/en/posts/fritzbox/"> Fritzbox</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/fritzbox/fritzbox-dns-server-aendern/" title="Change the public DNS server/resolver on a Fritzbox">Change the public DNS server/resolver on a Fritzbox</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/fritzbox/fritzbox-adguard-dns/" title="Fritzbox and AdGuard DNS">Fritzbox and AdGuard DNS</a></li>
  

  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/fritzbox/fritzbox-portfreigabe/" title="Set up Fritzbox port forwarding">Set up Fritzbox port forwarding</a></li>
  


      </ul>
    </li>
  

  
  
  
  
  
    
    <li>
      <i data-feather="plus-circle"></i><a class=" list-link" href=""> Windows</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class=" list-link" href="/en/posts/windows/windows-powershell/" title="Install Windows Powershell on Linux and Windows">Install Windows Powershell on Linux and Windows</a></li>
  


      </ul>
    </li>
  


            </div>
          </ul>
        </div>
      </div>
    </div>
  </section>


      
      
<section class="content-section" id="content-section">
  <div class="content">
    <div class="container p-0 read-area">
      
      <div class="hero-area col-sm-12" id="hero-area" style='background-image: url(/images/posts/it-security/Thumbnail-1.png);'>
      </div>

      
      <div class="page-content">
        
        <div class="author-profile ms-auto align-self-lg-center">
          <img class="rounded-circle" src='/images/author_hu_70de09e990a306d7.jpg' alt="Author Image">
          <h5 class="author-name">Marcel Dellmann</h5>
          <p class="text-muted">Tuesday, September 20, 2022 | 12 minutes</p>
        </div>
        

        <div class="title">
          <h1>UFW Firewall Raspberry Pi Installation</h1>
        </div>

        

        
          <div class="tags">
  <ul style="padding-left: 0;">
    
    
    <li class="rounded"><a href="/en/tags/raspberry-pi/" class="btn btn-sm btn-info">“raspberry pi”</a></li>
    
    
    <li class="rounded"><a href="/en/tags/firewall/" class="btn btn-sm btn-info">“firewall”</a></li>
    
    
    <li class="rounded"><a href="/en/tags/linux/" class="btn btn-sm btn-info">“linux”</a></li>
    
    
    <li class="rounded"><a href="/en/tags/security/" class="btn btn-sm btn-info">“security”</a></li>
    
    
    <li class="rounded"><a href="/en/tags/tutorials/" class="btn btn-sm btn-info">tutorials</a></li>
    
    
    <li class="rounded"><a href="/en/tags/video/" class="btn btn-sm btn-info">“video”</a></li>
    
  </ul>
</div>

        
        <div class="post-content" id="post-content">
          <h2 id="installing-ufw-firewall-uncomplicated-firewall-on-a-raspberry-pi">Installing UFW Firewall (Uncomplicated Firewall) on a Raspberry Pi</h2>
<p>In this post, &lsquo;<strong>UFW Firewall Raspberry Pi Installation</strong>&rsquo;, I would like to show you how to install and set up this firewall or command line interface for <strong>iptables</strong> on a Raspberry Pi or any other Linux-based distribution. This means that the commands listed here are not limited to the <strong>Raspberry Pi</strong>, but can also be used on all other Linux-based distros.</p>
<p>In keeping with the tutorial ‘Installing AdGuard on the Raspberry Pi’ (<a href="https://secure-bits.org/adguard-raspberry-pi-installation-2022/%29%27" target="_blank" rel="noopener">https://secure-bits.org/adguard-raspberry-pi-installation-2022/)'</a>, it makes sense to install the <a href="https://wiki.ubuntuusers.de/ufw/" target="_blank" rel="noopener">UFW firewall</a> on the Raspberry Pi with <strong>AdGuard Home</strong>. This will protect the AdGuard DNS server from unauthorized access from the network.</p>
<h3 id="ufw-firewall-rules-for-adguard-on-the-raspberry-pi">UFW firewall rules for AdGuard on the Raspberry Pi</h3>
<p>You can find the rules I suggest for the UFW firewall further down in this post. But first, make sure you read the whole post so you don&rsquo;t lock yourself out of the Raspberry Pi.
<a href="#adguard">To the AdGuard rules</a></p>
<h3 id="what-is-a-ufw-firewall">What is a UFW firewall?</h3>
<p>The UFW firewall is not actually a firewall, but rather provides an interface to make it easier to configure the rule-based firewall ‘iptables’ via the terminal. The ‘iptables’ firewall is a component of every Linux-based distribution.
With the UFW firewall, it is possible to create, change, or delete rules in ‘iptables’ using simple commands.</p>
<h3 id="is-there-a-graphical-user-interface-for-the-ufw-firewall">Is there a graphical user interface for the UFW firewall?</h3>
<p>There is also a graphical user interface (GUI) for the UFW firewall. This graphical user interface is called ‘gufw’ and is pre-installed on Ubuntu systems.
This extension is available for the following distributions:</p>
<ul>
<li>Ubuntu</li>
<li>Debian</li>
<li>Linux Mint</li>
<li>openSuse</li>
<li>archlinux</li>
<li>salix</li>
</ul>
<h3 id="note-on-the-listed-commands--ufw-firewall-raspberry-pi">Note on the listed commands | UFW firewall Raspberry Pi</h3>
<p>All commands listed here work not only on a Raspberry Pi, but also on any other Linux-based distribution such as Ubuntu, Debian, archLinux, and many other systems.</p>
<h3 id="basic-instructions-for-handling-a-firewall-rule">Basic instructions for handling a firewall rule</h3>
<p>With the UFW firewall, as well as other firewalls I am familiar with, there are three methods that regulate the processing of data packets in network traffic. Understanding these methods is the absolute basis for a secure firewall configuration.</p>
<h4 id="method-allow-or-pass">Method ‘allow or pass’</h4>
<p>With the ‘allow’ or ‘pass’ method, data packets are allowed during network requests. This method is usually the default for rules created for outgoing network traffic.
Incoming network traffic is only explicitly allowed via ‘allow or pass’.</p>
<h4 id="reject-method">‘reject’ method</h4>
<p>The ‘<strong>reject</strong>’ method, on the other hand, allows data packets in network traffic to be discarded and immediately sends feedback to the sender of the network request.
Because the feedback about the rejected request to the sender is often misused for denial of service attacks, this method of handling requests is not particularly advantageous for a firewall and is therefore not used for this purpose.
‘<strong>reject</strong>’ is used, for example, in communication between network components to avoid a potentially high network load.</p>
<h4 id="method-deny-or-drop">Method ‘deny or drop’</h4>
<p>Unlike the ‘<strong>reject</strong>’ method, the ‘<strong>deny</strong> <strong>or drop</strong>’ method also rejects the network request immediately, but the sender does not receive any direct feedback and the requests are effectively ignored.
However, the disadvantage of this method is that it can result in a higher network load. <strong>Nevertheless, this method of handling requests on a firewall is clearly preferable.</strong></p>
<h2 id="installing-the-ufw-firewall-on-raspberry-pi">Installing the UFW firewall on Raspberry Pi</h2>
<p>To begin installing the UFW firewall, you must first connect to the Raspberry Pi via SSH in the terminal window.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Create an SSH connection to the Raspberry Pi</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>ssh username@IP address of the Pi
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># For example: ssh pi@172.16.16.215</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Then enter your assigned password.</span>
</span></span></code></pre></div><p>After successfully logging in, the contents of the terminal window should look like the following image.</p>
<p><img src="/images/posts/it-security/Terminal-ssh-Verbindung.png" alt="Login in via SSH"></p>
<h3 id="install-ufw-firewall-on-raspberry-pi">Install UFW firewall on Raspberry Pi</h3>
<p>You can install the UFW firewall on the Raspberry Pi with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Install ufw firewall</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo apt install ufw
</span></span></code></pre></div><h3 id="activate-ufw-firewall-service">Activate UFW firewall service</h3>
<p>After installation, the firewall system service may need to be started.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Start the UFW firewall system service</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo systemctl enable ufw --now
</span></span></code></pre></div><h3 id="checking-the-firewall-status---ufw-firewall-raspberry-pi">Checking the firewall status - UFW firewall Raspberry Pi</h3>
<p>To check the status of the firewall, enter the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Query the firewall status</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw status
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Output:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>Status: inactive
</span></span></code></pre></div><blockquote>
<h3 id="important">Important!</h3>
<p><strong>Please do not activate the UFW firewall until the end of this tutorial, otherwise you will also lock yourself out of the Raspberry Pi!</strong></p></blockquote>
<h3 id="create-basic-incoming-traffic-prohibition-rule---ufw-firewall-raspberry-pi">Create basic incoming traffic prohibition rule - UFW firewall Raspberry Pi</h3>
<p>First, we will prohibit basic network traffic so that only explicit permissions created by us are active.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Block basic network traffic</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw default deny incoming
</span></span></code></pre></div><h3 id="create-basic-outgoing-rule---ufw-firewall-raspberry-pi">Create basic outgoing rule - UFW firewall Raspberry Pi</h3>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Allow basic outgoing network traffic</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw default allow outgoing
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Of course, basic outgoing network traffic can also be blocked and individual ports can be enabled later</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>sudo ufw default deny outgoing
</span></span></code></pre></div><h3 id="create-rule-for-access-via-ssh---ufw-firewall-raspberry-pi">Create rule for access via ssh - UFW firewall Raspberry Pi</h3>
<p>To ensure that access to the Raspberry Pi via ssh is still possible after activating the UFW firewall, we create a rule for this.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Create rule for ssh access. This can either be specified via ‘Port 22’ or you can select the ‘ssh’ service. A list of services recognized by the UFW firewall can be found at /etc/services </span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw allow ssh
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Allow access only from your network</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>sudo ufw allow from IP address range to any port <span style="color:#0086f7;font-weight:bold">22</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># This is what the rule would look like for my network</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>sudo ufw allow from 172.16.16.0/24 to any port <span style="color:#0086f7;font-weight:bold">22</span>
</span></span></code></pre></div><h4 id="ufw-firewall-limit-login-attempts-for-ssh">UFW firewall Limit login attempts for ssh</h4>
<p>To define a limit for ssh access and thus prevent a brute force attack (also works for other ports and services), you can create a rule that sets a limit on login attempts.
With this limit, login attempts are restricted to 6 logins in 30 seconds.
You can create this rule as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Set limit for login attempts on ssh port</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw limit ssh
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>or
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>sudo ufw limit 22/tcp
</span></span></code></pre></div><h3 id="known-services-of-the-ufw-firewall">Known services of the UFW firewall</h3>
<p>The UFW firewall also recognizes some ‘<strong>services</strong>’ by default. Services include ‘<strong>ssh</strong>’ for <strong>port 22</strong>, for example.</p>
<p>These ‘<strong>services</strong>’ can also be addressed directly when creating new firewall rules.
The image below shows the file in which the services of the UFW firewall are listed.
You can view this file using the command ‘<strong>nano /etc/services</strong>’.</p>
<p><img src="/images/posts/it-security/WindowsTerminal_ufw-firewall-services.png" alt="List of services under Debian"></p>
<h3 id="defining-firewall-rules-using-apps--ufw-firewall-raspberry-pi">Defining firewall rules using apps – UFW firewall Raspberry Pi</h3>
<p>Another method of defining the firewall rules is to use ‘<strong>App</strong>’ as a definition for handling data packets.
‘<strong>Apps</strong>’ are applications that are running on your system and, when installed, create and store so-called ‘<strong>profiles</strong>’, which specify the ports used by the application.</p>
<h4 id="display-a-list-of-installed-app-profiles">Display a list of installed app profiles</h4>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Display UFW firewall app list</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw app list
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># See the image below for an example output</span>
</span></span></code></pre></div><p><img src="/images/posts/it-security/sudo-ufw-app-list.png" alt="APP list of the UFW firewall"></p>
<h4 id="display-the-app-profile-of-an-application-in-the-ufw-firewall">Display the app profile of an application in the UFW firewall</h4>
<p>As mentioned in the previous paragraph, the ports used by an application are specified in the app profile of an installed application. To display this profile, enter the following command in your terminal window.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Display app profile</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw app info &lt;name of the app&gt;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Example</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>sudo ufw app info IMAPS
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Output: See image below</span>
</span></span></code></pre></div><h4 id="define-firewall-rule-using-app-profile">Define firewall rule using app profile</h4>
<p>To create a firewall rule using an app profile, enter the following command in the terminal.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Define UFW firewall rule using app profile</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw allow/deny APP profile
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Example for IMAPS</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>sudo ufw allow IMAPS
</span></span></code></pre></div><hr>
<p><img src="/images/posts/it-security/sudo-ufw-app-info.png" alt="App-Profil mittels UFW-Firewall anzeigen"></p>
<hr>
<h3 id="define-your-own-firewall-profiles---ufw-firewall-raspberry-pi">Define your own firewall profiles - UFW firewall Raspberry Pi</h3>
<p>Of course, you also have the option of creating your own APP profiles (similar to the ‘alias’ in OPNsense) and assigning multiple ports to your own profile. Then, when creating rules for the UFW firewall, you only need to name this profile.
These app profiles are saved under the following path:
<strong>/etc/ufw/application.d/</strong>
In this example, I have named the profile I created ‘eigenesprofile’.</p>
<h4 id="create-ufw-firewall-app-profile">Create UFW firewall app profile</h4>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Change to the directory where the app profiles are stored</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>cd /etc/ufw/application.d/
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Display the existing profiles (may look different depending on the apps you have installed)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>ls -l
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Output</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>pi@raspberrypi3:/etc/ufw/applications.d $ ls -l
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>total <span style="color:#0086f7;font-weight:bold">44</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">145</span> Jul  <span style="color:#0086f7;font-weight:bold">2</span> 00:37 openssh-server
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">349</span> Dec <span style="color:#0086f7;font-weight:bold">14</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-bittorent
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">627</span> Mar <span style="color:#0086f7;font-weight:bold">30</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-chat
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">513</span> Mar <span style="color:#0086f7;font-weight:bold">30</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-directoryserver
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root  <span style="color:#0086f7;font-weight:bold">89</span> Jan <span style="color:#0086f7;font-weight:bold">14</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-dnsserver
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">358</span> Mar <span style="color:#0086f7;font-weight:bold">30</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-fileserver
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">212</span> Jan <span style="color:#0086f7;font-weight:bold">14</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-loginserver
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">524</span> Mar <span style="color:#0086f7;font-weight:bold">30</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-mailserver
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">131</span> Jan <span style="color:#0086f7;font-weight:bold">14</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-printserver
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">155</span> Jan <span style="color:#0086f7;font-weight:bold">14</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-proxyserver
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>-rw-r--r-- <span style="color:#0086f7;font-weight:bold">1</span> root root <span style="color:#0086f7;font-weight:bold">320</span> Jan <span style="color:#0086f7;font-weight:bold">14</span>  <span style="color:#0086f7;font-weight:bold">2018</span> ufw-webserver
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>pi@raspberrypi3:/etc/ufw/applications.d $
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Create your own profile</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>sudo nano ownprofile
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># In the Nano editor window, enter the following (adapted to your profile)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>[ownprofile]
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#fb660a">title</span>=Ports <span style="color:#fb660a;font-weight:bold">for</span> your own profile
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#fb660a">description</span>=Ports and port ranges <span style="color:#fb660a;font-weight:bold">for</span> your own app profile
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#fb660a">ports</span>=443,80,3689/tcp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Save with CTRL+O and Enter, exit with CTRL+X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Load the new rule</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>sudo ufw reload
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Activate the rule you created</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>sudo ufw allow ownprofile
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Check the UFW firewall rules</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>sudo ufw status verbose
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Output see image below</span>
</span></span></code></pre></div><h4 id="checking-the-ufw-firewall-rules-after-creating-your-own-profile">Checking the UFW firewall rules after creating your own profile</h4>
<p><img src="/images/posts/it-security/Eigenes-App-Profil-ueberpruefen.png" alt="Checking the UFW firewall rules after creating your own profile"></p>
<h3 id="defining-multiple-ports-as-a-rule">Defining multiple ports as a rule</h3>
<p>If you want to create a firewall rule for several ports at the same time according to protocol definition (UDP or TCP), there are two options.
The first option is to list the ports to be regulated with a ‘<strong>,</strong>’ (for example: 22,25,80,443).
The second option is to specify port ranges using the ‘<strong>:</strong>’ character (for example: 2000:3000).
Depending on which option you choose, enter the corresponding command in the terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Create UFW firewall rule for multiple ports of the same protocol</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw allow 22,25,80,443/tcp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Create firewall rule using port range</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>sudo ufw allow 2000:3000/tcp
</span></span></code></pre></div><h3 id="add-rule-comment---ufw-firewall-raspberry-pi">Add rule comment - UFW firewall Raspberry Pi</h3>
<p>If you have a comprehensive set of firewall rules, it is a good idea to add a comment to each rule explaining its function. This helps you keep track of rules or ports that cannot be clearly assigned.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Add a comment to a rule</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw allow ssh comment “Enable ssh connection”
</span></span></code></pre></div><h3 id="enable-and-disable-the-ufw-firewall">Enable and disable the UFW firewall</h3>
<p>You can enable or disable the firewall using the following commands.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Enable</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw enable
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Disable</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>sudo ufw disable
</span></span></code></pre></div><h3 id="display-firewall-status">Display firewall status</h3>
<p>There are two ways to display the status of the UFW firewall.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Option 1, displays all rules:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw status verbose
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Option 2, displays rules with numbering:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>sudo ufw status numbered
</span></span></code></pre></div><h3 id="delete-rules---ufw-firewall-raspberry-pi">Delete rules - UFW firewall Raspberry Pi</h3>
<p>The easiest way to delete rules is to proceed as follows.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Display the UFW firewall rules numbered:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>sudo ufw status numbered
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Example output:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>pi@raspberrypi3:~ $ sudo ufw status numbered
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>Status: active
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>     To                         Action      From
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>     -- ------ ----
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>[ 1] <span style="color:#0086f7;font-weight:bold">22</span>                         ALLOW IN    172.16.16.0/24
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>[ 2] <span style="color:#0086f7;font-weight:bold">3000</span>                       ALLOW IN    172.16.16.0/24
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>[ 3] 53/tcp                     ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>[ 4] 53/udp                     ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>[ 5] 853/tcp                    ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>[ 6] 853/udp                    ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>[ 7] 67/tcp                     ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>[ 8] 67/udp                     ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>[ 9] 68/tcp                     ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>[10] 68/udp                     ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>[11] 80/tcp                     ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>[12] 443/tcp                    ALLOW IN    Anywhere
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Delete the UFW firewall rule. Here is rule 3 as an example:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>sudo ufw delete <span style="color:#0086f7;font-weight:bold">3</span>
</span></span></code></pre></div><h3 id="uninstall-ufw-firewall">Uninstall UFW firewall</h3>
<p>If, for hopefully good reasons ;), you want to uninstall the firewall, use the following command.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Uninstall UFW firewall</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo apt remove ufw --purge
</span></span></code></pre></div><h3 id="notify-the-ufw-firewall-of-rule-changes">Notify the UFW firewall of rule changes</h3>
<p>If you have made changes to the firewall rules, you must notify the firewall.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Notify the firewall of rule changes</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>sudo ufw reload
</span></span></code></pre></div><h2 id="video-tutorial---securing-adguard-with-ufw-firewall-on-raspberry-pi">Video tutorial - Securing AdGuard with UFW firewall on Raspberry Pi</h2>
<p>A video tutorial on ‘Securing AdGuard installation on a Raspberry Pi using UFW firewall’ will also be available soon on my <a href="https://www.youtube.com/channel/UCr-cuwB555JmAm4F412KZ2Q" target="_blank" rel="noopener">YouTube channel</a>.
<a href="https://youtu.be/Dh3A1Idktmg" target="_blank" rel="noopener">https://youtu.be/Dh3A1Idktmg</a>
So it&rsquo;s best to <a href="https://www.youtube.com/channel/UCr-cuwB555JmAm4F412KZ2Q" target="_blank" rel="noopener">subscribe</a> to my channel right away so you don&rsquo;t miss any videos.</p>
<h2 id="rules-for-adguard--ufw-firewall-raspberry-pi">Rules for AdGuard | UFW firewall Raspberry Pi</h2>
<p>Now that you hopefully have a good overview of the UFW firewall rules, it&rsquo;s time to create the rules for our installed AdGuard on the Raspberry Pi.</p>
<div class="highlight"><pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Firewall reset - This resets the UFW firewall to its original configuration after installation</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>sudo ufw reset
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Basic firewall rules</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Disable IPv6 - To do this, you need to change the entry ‘IPv6=yes’ to ‘no’ in the file ‘/etc/default/ufw’</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Open the configuration file with the Nano editor</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>sudo nano /etc/default/ufw
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#fb660a">IPv6</span>=no
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Save the file with CTRL+O and exit the Nano editor with CTRL+X</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Restart the UFW firewall service</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>sudo systemctl restart ufw
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Block all incoming traffic</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>sudo ufw default deny incoming
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Allow all outgoing traffic</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>sudo ufw default allow outgoing
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># The IP address range must, of course, match the range in which the Raspberry is running | Enable SSH access via the defined IP address range</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>sudo ufw allow from 172.16.16.0/24 to any port <span style="color:#0086f7;font-weight:bold">22</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Port for accessing the AdGuard dashboard (again, adjust the IP address range here)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>sudo ufw allow from 172.16.16.0/24 to any port <span style="color:#0086f7;font-weight:bold">3000</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Port for the DNS service</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>sudo ufw allow 53/tcp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>sudo ufw allow 53/udp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>sudo ufw allow 853/tcp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>sudo ufw allow 853/udp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Allow ports for DHCP service</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>sudo ufw allow 67/tcp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>sudo ufw allow 67/udp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>sudo ufw allow 68/tcp![Überprüfung der UFW-Firewall-Regeln nach Anlegung des eigenen Profils](/images/posts/it-security/Eigenes-App-Profil-ueberpruefen.png)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>sudo ufw allow 68/udp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Ports for https and http</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>sudo ufw allow 80/tcp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>sudo ufw allow 443/tcp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Ports for DNS over Quic</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>sudo ufw allow 784/udp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>sudo ufw allow 8853/udp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Ports for DNSCrypt</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>sudo ufw allow 5443/udp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>sudo ufw allow 5443/tcp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Ports for NTP - Timeserver:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span>sudo ufw allow 37/udp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span>sudo ufw allow 37/tcp
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Reload firewall rules</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span>sudo ufw reload
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span><span style="color:#080;background-color:#0f140f;font-style:italic"># Activate firewall:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span>sudo ufw enable
</span></span></code></pre></div><h2 id="summary---ufw-firewall-raspberry-pi">Summary - UFW firewall Raspberry Pi</h2>
<p>In this tutorial, ‘UFW firewall Raspberry Pi’, we have secured the Raspberry Pi against unnecessary access using the UFW firewall.
The UFW firewall tool makes it easy to configure iptables (Netfilter) and thus ensure greater security on a Linux system.
If you&rsquo;re not comfortable using the terminal, you can also use the graphical user interface ‘gufw’ to do everything with a few clicks, provided, of course, that a graphical user interface is installed on your system.
I hope you enjoyed this post and that it helped some of you a little bit!
If you have any questions, please leave me a comment or send me an email.</p>

        </div>

        
        <div class="row ps-3 pe-3">
        
          <div class="col-md-6 share-buttons">
          
            <strong>Share on:</strong>
            
            
            
            
            
            
                <a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=http%3a%2f%2flocalhost%3a1313%2fen%2fposts%2fsecurity%2fufw-firewall-debian-based%2f&title=UFW%20Firewall%20Raspberry%20Pi%20Installation" target="_blank">
                  <i class="fab fa-linkedin"></i>
                </a>
            
            
             
            
            
                <a class="btn icon-button" href="mailto:?subject=UFW%20Firewall%20Raspberry%20Pi%20Installation&body=http%3a%2f%2flocalhost%3a1313%2fen%2fposts%2fsecurity%2fufw-firewall-debian-based%2f" target="_blank">
                  <i class="fas fa-envelope-open-text"></i>
                </a>
            
          
          </div>

        
        
        </div>



      
      <hr />
        







  





  
  

  
  

  
  

  
  

  
  

  
    
    
  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  


<div class="row next-prev-navigator">
  
    <div class="col-md-6 previous-article">
      <a href="/en/posts/linux/der-traceroute-befehl-unter-linux/" title="The traceroute command in Linux" class="btn filled-button">
        <div><i class="fas fa-chevron-circle-left"></i> Prev</div>
        <div class="next-prev-text">The traceroute command in Linux</div>
      </a>
    </div>
  
  
      
      
        
      
      <div class="col-md-6 next-article">
        <a href="/en/posts/security/wie-funktioniert-eine-firewall/" title="How does a firewall work?" class="btn filled-button">
          <div>Next <i class="fas fa-chevron-circle-right"></i></div>
          <div class="next-prev-text">How does a firewall work?</div>
        </a>
      </div>
    
</div>

      <hr />

      
      

      
      

      </div>
    </div>
  </div>
  
  <a id="scroll-to-top" class="btn" type="button" data-bs-toggle="tooltip" data-bs-placement="left" title="Scroll to top">
    <i class="fas fa-chevron-circle-up"></i>
  </a>
</section>


      
      
  <section class="toc-section" id="toc-section">
    
    <div class="toc-holder">
      <h5 class="text-center ps-3">Table of Contents</h5>
      <hr>
      <div class="toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#installing-ufw-firewall-uncomplicated-firewall-on-a-raspberry-pi">Installing UFW Firewall (Uncomplicated Firewall) on a Raspberry Pi</a>
      <ul>
        <li><a href="#ufw-firewall-rules-for-adguard-on-the-raspberry-pi">UFW firewall rules for AdGuard on the Raspberry Pi</a></li>
        <li><a href="#what-is-a-ufw-firewall">What is a UFW firewall?</a></li>
        <li><a href="#is-there-a-graphical-user-interface-for-the-ufw-firewall">Is there a graphical user interface for the UFW firewall?</a></li>
        <li><a href="#note-on-the-listed-commands--ufw-firewall-raspberry-pi">Note on the listed commands | UFW firewall Raspberry Pi</a></li>
        <li><a href="#basic-instructions-for-handling-a-firewall-rule">Basic instructions for handling a firewall rule</a></li>
      </ul>
    </li>
    <li><a href="#installing-the-ufw-firewall-on-raspberry-pi">Installing the UFW firewall on Raspberry Pi</a>
      <ul>
        <li><a href="#install-ufw-firewall-on-raspberry-pi">Install UFW firewall on Raspberry Pi</a></li>
        <li><a href="#activate-ufw-firewall-service">Activate UFW firewall service</a></li>
        <li><a href="#checking-the-firewall-status---ufw-firewall-raspberry-pi">Checking the firewall status - UFW firewall Raspberry Pi</a></li>
        <li><a href="#important">Important!</a></li>
        <li><a href="#create-basic-incoming-traffic-prohibition-rule---ufw-firewall-raspberry-pi">Create basic incoming traffic prohibition rule - UFW firewall Raspberry Pi</a></li>
        <li><a href="#create-basic-outgoing-rule---ufw-firewall-raspberry-pi">Create basic outgoing rule - UFW firewall Raspberry Pi</a></li>
        <li><a href="#create-rule-for-access-via-ssh---ufw-firewall-raspberry-pi">Create rule for access via ssh - UFW firewall Raspberry Pi</a></li>
        <li><a href="#known-services-of-the-ufw-firewall">Known services of the UFW firewall</a></li>
        <li><a href="#defining-firewall-rules-using-apps--ufw-firewall-raspberry-pi">Defining firewall rules using apps – UFW firewall Raspberry Pi</a></li>
        <li><a href="#define-your-own-firewall-profiles---ufw-firewall-raspberry-pi">Define your own firewall profiles - UFW firewall Raspberry Pi</a></li>
        <li><a href="#defining-multiple-ports-as-a-rule">Defining multiple ports as a rule</a></li>
        <li><a href="#add-rule-comment---ufw-firewall-raspberry-pi">Add rule comment - UFW firewall Raspberry Pi</a></li>
        <li><a href="#enable-and-disable-the-ufw-firewall">Enable and disable the UFW firewall</a></li>
        <li><a href="#display-firewall-status">Display firewall status</a></li>
        <li><a href="#delete-rules---ufw-firewall-raspberry-pi">Delete rules - UFW firewall Raspberry Pi</a></li>
        <li><a href="#uninstall-ufw-firewall">Uninstall UFW firewall</a></li>
        <li><a href="#notify-the-ufw-firewall-of-rule-changes">Notify the UFW firewall of rule changes</a></li>
      </ul>
    </li>
    <li><a href="#video-tutorial---securing-adguard-with-ufw-firewall-on-raspberry-pi">Video tutorial - Securing AdGuard with UFW firewall on Raspberry Pi</a></li>
    <li><a href="#rules-for-adguard--ufw-firewall-raspberry-pi">Rules for AdGuard | UFW firewall Raspberry Pi</a></li>
    <li><a href="#summary---ufw-firewall-raspberry-pi">Summary - UFW firewall Raspberry Pi</a></li>
  </ul>
</nav>
      </div>
    </div>
    
  </section>

    </div>

    
    












  
  
    
  

  
  
    
  

  
  
    
  

  
  
    
    
      
    
  


  
  
  

  
  
  

  
  
  
    
  
  

  
  
  

  <footer id="footer" class="container-fluid text-center align-content-center footer pb-2">
    <div class="container pt-5">
      <div class="row text-start">
        
        <div class="col-md-4 col-sm-12">
          <h5>Navigation</h5>
          
          <ul>
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/en/#about">About</a>
                </li>
              
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/en/#accomplishments">Certifications</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/en/#projects">Projekte</a>
                </li>
              
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="http://localhost:1313/en/#recent-posts">Recent Posts</a>
                </li>
              
            
              
                
                    <li class="nav-item">
                      <a class="smooth-scroll" href="/sites/privacy">Privacy</a>
                    </li>
                
              
                
                    <li class="nav-item">
                      <a class="smooth-scroll" href="mailto:ticket@secure-bits.org">Contact</a>
                    </li>
                
              
            
          </ul>
          
        </div>
        
        
        <div class="col-md-4 col-sm-12">
          <h5>Contact me:</h5>
          <ul>
            
              
                <li><a href=mailto:ticket@secure-bits.org target="_blank" rel="noopener">
                  <span><i class="fas fa-envelope"></i></span> <span>ticket@secure-bits.org</span>
                </a></li>
              
            
              
                <li><a href=https://github.com/securebitsorg target="_blank" rel="noopener">
                  <span><i class="fab fa-github"></i></span> <span>securebitsorg</span>
                </a></li>
              
            
              
                <li><a href=https://www.linkedin.com/in/securebits target="_blank" rel="noopener">
                  <span><i class="fab fa-linkedin"></i></span> <span>Marcel Dellmann</span>
                </a></li>
              
            
          </ul>
        </div>
        
        
        
      </div>
    </div>
    
    
  </footer>


    <script src="/application.202fbd9f1f0b8fe445cab2740de250c2eb9d0ee87436d38df7b5c71c323beb4d.js" integrity="sha256-IC&#43;9nx8Lj&#43;RFyrJ0DeJQwuudDuh0NtON97XHHDI7600=" defer></script>


    
     

    
    
        
        
        
            <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
            <script>
            kofiWidgetOverlay.draw('securebits57389', {
                'type': 'floating-chat',
                'floating-chat.donateButton.text': 'Support me',
                'floating-chat.donateButton.text-color': '#f9fafc',
                'floating-chat.donateButton.background-color': '#248aaa',
            });
            </script>
        
        
        
        
    

</body>
</html>
